#-*- mode: snakemake -*-
"""Snakemake rules for external data in the micriobiome workflow
"""

rule qiime2_prebuild_classifier_gg:
    output:
        join(QIIME2_INTERIM, 'classifiers', 'gg-13-8-99-515-806-nb-classifier.qza')
    params:
        version = config['quant']['qiime2']['version']
    shell:
        'wget -O {output} "https://data.qiime2.org/{params.version}/common/gg-13-8-99-515-806-nb-classifier.qza"'


rule qiime2_prebuild_classifier_silva:
    output:
        join(QIIME2_INTERIM, 'classifiers', 'silva-132-99-515-806-nb-classifier.qza')
    params:
        version = config['quant']['qiime2']['version']
    shell:
        'wget -O {output} "https://data.qiime2.org/{params.version}/common/silva-132-99-515-806-nb-classifier.qza"'


def get_qiime2_prebuild_classifier(wildcards):
    if wildcards.db == 'gg':
        return join(QIIME2_INTERIM, 'classifiers', 'gg-13-8-99-515-806-nb-classifier.qza')
    elif wildcards.db == 'silva':
        return join(QIIME2_INTERIM, 'classifiers', 'silva-132-99-515-806-nb-classifier.qza')
